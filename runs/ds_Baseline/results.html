<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRgFUS Tremor Assessment - Clinical Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .card {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
            color: white;
            padding: 32px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 40px;
            margin-top: 20px;
        }

        .patient-info {
            flex: 1;
        }

        .patient-info p {
            font-size: 1.1em;
            margin: 8px 0;
            opacity: 0.95;
        }

        .key-metrics {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            min-width: 300px;
        }

        .key-metrics h3 {
            margin-bottom: 16px;
            font-weight: 500;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: rgba(255,255,255,0.8);
        }

        .metric-value {
            font-weight: 600;
            font-size: 1.1em;
        }

        .assessment {
            background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
            color: white;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .assessment.warning {
            background: linear-gradient(135deg, #F57C00 0%, #E65100 100%);
        }

        .assessment.alert {
            background: linear-gradient(135deg, #C62828 0%, #B71C1C 100%);
        }

        .assessment h2 {
            margin-bottom: 12px;
            font-size: 1.8em;
        }

        .assessment p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .chart-container {
            width: 100%;
            height: 600px;
            background: #2d2d2d;
            border-radius: 8px;
            padding: 16px;
        }

        .chart-title {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #ffffff;
            font-weight: 500;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: #2d2d2d;
            padding: 24px;
            border-radius: 8px;
        }

        .metric-card h3 {
            color: #42A5F5;
            margin-bottom: 16px;
            font-size: 1.3em;
            border-bottom: 2px solid #42A5F5;
            padding-bottom: 8px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #424242;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-item-label {
            color: #b0b0b0;
        }

        .metric-item-value {
            font-weight: 600;
            color: #ffffff;
        }

        @media (max-width: 768px) {
            .header-info {
                flex-direction: column;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
    <div class="header">
        <h1>TREMOR ASSESSMENT</h1>
        <div class="header-info">
            <div class="patient-info">
                <p><strong>Patient:</strong> ds</p>
                <p><strong>Session:</strong> BASELINE SESSION</p>
                <p><strong>Date:</strong> 2025-11-08</p>
            </div>
            <div class="key-metrics">
                <h3>KEY MEASUREMENTS</h3>
                <div class="metric-row">
                    <span class="metric-label">Tremor Band RMS</span>
                    <span class="metric-value">8.49 px</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Peak Frequency</span>
                    <span class="metric-value">5.03 Hz</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Overall RMS</span>
                    <span class="metric-value">66.69 px</span>
                </div>
                
            </div>
        </div>
    </div>
    

        

        <div class="card">
            <h2 class="chart-title">360Â° DIRECTIONAL TREMOR ANALYSIS</h2>
            <div id="directional-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">TREMOR BAND FREQUENCY ANALYSIS (4-10 Hz)</h2>
            <div id="frequency-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">FINGER TRACE PATH</h2>
            <div id="path-chart" class="chart-container"></div>
        </div>

        <div class="metrics-grid">
            
    <div class="metric-card">
        <h3>SIGNAL ANALYSIS DETAILS</h3>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Power</span>
            <span class="metric-item-value">60.9652</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Range</span>
            <span class="metric-item-value">4.0 - 10.0 Hz</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Resampled Length</span>
            <span class="metric-item-value">598 samples</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Sampling Rate</span>
            <span class="metric-item-value">30.0 Hz</span>
        </div>
    </div>
    
            
    <div class="metric-card">
        <h3>TRACKING PERFORMANCE</h3>
        <div class="metric-item">
            <span class="metric-item-label">Duration</span>
            <span class="metric-item-value">19.95 sec</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Total Frames</span>
            <span class="metric-item-value">315</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Average FPS</span>
            <span class="metric-item-value">15.79</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tracking Loss Rate</span>
            <span class="metric-item-value">0.0%</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Mean Error</span>
            <span class="metric-item-value">314.61 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Median Error</span>
            <span class="metric-item-value">298.65 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">95th Percentile</span>
            <span class="metric-item-value">512.98 px</span>
        </div>
    </div>
    
        </div>
    </div>

    <script>
        // Plotly chart configurations
        const darkLayout = {
            paper_bgcolor: '#2d2d2d',
            plot_bgcolor: '#2d2d2d',
            font: { color: '#e0e0e0' },
            xaxis: { gridcolor: '#424242', zerolinecolor: '#424242' },
            yaxis: { gridcolor: '#424242', zerolinecolor: '#424242' }
        };

        // Frequency chart
        
        const freqData = {
            x: [4.026845637583892, 4.228187919463087, 4.429530201342281, 4.630872483221476, 4.832214765100671, 5.033557046979865, 5.23489932885906, 5.4362416107382545, 5.6375838926174495, 5.838926174496644, 6.040268456375839, 6.241610738255033, 6.442953020134228, 6.644295302013423, 6.845637583892617, 7.046979865771812, 7.248322147651006, 7.449664429530201, 7.651006711409395, 7.85234899328859, 8.053691275167784, 8.25503355704698, 8.456375838926174, 8.657718120805368, 8.859060402684563, 9.060402684563758, 9.261744966442953, 9.463087248322147, 9.664429530201343, 9.865771812080537],
            y: [29.17185717926181, 17.407480327138646, 18.867499106701857, 15.795310243766693, 22.626664412257885, 30.872443972784268, 16.779140292317848, 9.40505481915645, 11.727509079548028, 14.343818018099533, 17.795873378312546, 10.143551570540337, 11.388936175194205, 9.787163769206636, 6.92985955822451, 9.707185597719148, 9.31747337248437, 8.46819860122913, 6.877586567597923, 6.532644484073519, 12.049982772838904, 6.4597955411993775, 3.6418426548742904, 2.0827330572582485, 1.4321781344824673, 1.9323545544005263, 1.4818968580353846, 1.7876739177196637, 2.2000243036730036, 0.732022197660434],
            type: 'scatter',
            mode: 'lines',
            line: { color: '#42A5F5', width: 3 },
            fill: 'tozeroy',
            fillcolor: 'rgba(66, 165, 245, 0.3)',
            name: 'Tremor Band PSD (4-10 Hz)'
        };

        const peakLine = {
            x: [5.033557046979865, 5.033557046979865],
            y: [0, 30.872443972784268],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#EF5350', width: 2, dash: 'dash' },
            marker: { size: 10, symbol: 'diamond' },
            name: 'Peak Tremor: 5.03 Hz'
        };

        const freqLayout = {
            ...darkLayout,
            xaxis: {
                title: 'Frequency (Hz)',
                gridcolor: '#424242',
                range: [4, 10]  // Lock to tremor band
            },
            yaxis: {
                title: 'Power Spectral Density (Tremor Band)',
                gridcolor: '#424242'
            },
            showlegend: true,
            legend: {
                x: 1,
                xanchor: 'right',
                y: 1,
                bgcolor: 'rgba(45,45,45,0.8)'
            },
            margin: { l: 60, r: 40, t: 20, b: 60 }
        };

        Plotly.newPlot('frequency-chart', [freqData, peakLine], freqLayout, {responsive: true});
    

        // Directional chart
        
        const dirData = {
            r: [7818.55619435802, 11888.769719335067, 10768.364571813388, 12359.353606497396, 10907.124121859768, 9505.04334773742, 6469.1162423163105, 13850.485216163393, 21176.71832905837, 28236.27336410676, 18695.22388009062, 7110.859780849854, 5806.305619232212, 7668.972167063317, 9449.593675489567, 6922.344333432337, 10360.802512239856, 13073.300072478738, 11675.01281760313, 6383.520967812838, 7741.895631117604, 13464.011329185672, 8210.701138912493, 9296.272263246328, 8843.192270549078, 14353.145962674678, 22518.965957389493, 27172.616428680085, 24973.946509028156, 7076.243086518856, 9578.579466059991, 7208.073846570832, 7673.385415146563, 9051.131687713374, 12282.896041714936, 13591.119162548914],
            theta: [5.0, 15.0, 25.0, 35.0, 45.0, 55.0, 65.0, 75.0, 85.0, 95.0, 105.0, 115.0, 125.0, 135.0, 145.0, 155.0, 165.0, 175.0, 185.0, 195.0, 205.0, 215.0, 225.0, 235.0, 245.0, 255.0, 265.0, 275.0, 285.0, 295.0, 305.0, 315.0, 325.0, 335.0, 345.0, 355.0],
            type: 'barpolar',
            marker: {
                color: ["#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#EF5350", "#42A5F5", "#42A5F5", "#66BB6A", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5"],
                line: { color: '#2d2d2d', width: 1 }
            },
            opacity: 0.8
        };

        const dirLayout = {
            ...darkLayout,
            polar: {
                radialaxis: {
                    visible: true,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                angularaxis: {
                    direction: 'counterclockwise',
                    rotation: 0,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                bgcolor: '#2d2d2d'
            },
            showlegend: false,
            margin: { l: 80, r: 80, t: 40, b: 80 }
        };

        Plotly.newPlot('directional-chart', [dirData], dirLayout, {responsive: true});
    

        // Path chart
        
            // Finger tracking path with time gradient
            const pathData = {
                x: [1296.79, 1290.26, 1294.06, 1292.94, 1290.21, 1295.96, 1295.38, 1289.88, 1294.35, 1293.02, 1293.53, 1282.82, 1288.61, 1273.26, 1257.47, 1266.91, 1267.98, 1250.49, 1255.96, 1252.58, 1256.97, 1256.0, 1258.11, 1264.92, 1265.79, 1287.58, 1317.34, 1312.04, 1311.12, 1372.44, 1371.59, 1403.39, 1356.67, 1364.49, 1351.81, 1224.41, 1240.31, 1230.82, 1108.54, 1088.99, 1025.67, 1049.9, 1052.11, 1051.75, 1108.52, 1117.33, 1189.23, 1262.51, 1267.86, 1272.8, 1367.73, 1367.67, 1435.38, 1447.4, 1441.71, 1441.84, 1416.56, 1412.19, 1351.31, 1221.25, 1226.18, 1116.76, 1114.38, 1115.93, 1117.57, 1137.91, 1136.82, 1205.22, 1310.52, 1315.32, 1387.4, 1410.85, 1400.42, 1406.3, 1372.78, 1367.41, 1269.8, 1121.07, 1120.25, 1119.86, 1087.15, 1084.72, 1089.5, 1146.86, 1150.12, 1193.44, 1224.47, 1223.83, 1223.6, 1271.16, 1275.22, 1372.4, 1384.18, 1380.25, 1379.78, 1338.34, 1204.42, 1209.44, 1073.06, 1068.61, 1043.3, 1036.2, 1039.47, 1060.08, 1142.01, 1151.91, 1239.6, 1325.32, 1330.87, 1396.34, 1414.15, 1413.21, 1391.01, 1309.11, 1285.62, 1129.63, 1030.94, 1034.49, 1042.9, 1082.38, 1082.73, 1086.02, 1121.2, 1170.96, 1183.23, 1268.58, 1273.53, 1357.99, 1376.11, 1374.8, 1327.12, 1196.14, 1199.48, 1050.66, 1027.94, 1029.06, 1041.29, 1122.95, 1132.56, 1177.03, 1273.21, 1277.78, 1321.91, 1342.03, 1339.69, 1290.85, 1139.43, 1133.86, 1039.13, 1001.61, 1004.94, 1034.07, 1081.55, 1087.0, 1146.03, 1282.57, 1282.23, 1284.53, 1352.23, 1377.05, 1369.44, 1349.53, 1338.54, 1249.95, 1090.21, 1084.88, 1023.9, 1030.52, 1029.35, 1046.93, 1115.11, 1119.47, 1191.18, 1283.81, 1271.77, 1293.93, 1273.22, 1274.0, 1259.5, 1242.77, 1242.78, 1244.14, 1265.55, 1266.36, 1260.37, 1227.59, 1224.52, 1179.93, 1133.07, 1117.78, 1054.29, 951.58, 948.7, 843.38, 855.74, 853.69, 901.6, 962.2, 958.0, 1032.83, 1097.08, 1103.18, 1192.42, 1263.04, 1253.52, 1264.12, 1158.05, 1153.41, 967.17, 896.29, 880.38, 878.33, 949.18, 946.65, 1055.33, 1119.95, 1120.7, 1189.58, 1253.62, 1258.19, 1261.66, 1192.79, 1185.98, 1045.5, 926.61, 925.97, 920.77, 952.09, 955.24, 994.38, 1016.87, 1016.06, 1025.48, 1011.2, 1008.24, 1006.67, 1023.28, 1021.5, 1020.75, 1026.42, 1031.24, 1036.89, 1046.63, 1045.57, 1055.06, 1052.11, 1056.11, 1056.61, 1068.39, 1072.03, 1061.54, 1088.63, 1085.16, 1101.76, 1093.74, 1089.28, 1099.43, 1056.42, 1051.75, 1073.99, 1129.64, 1157.39, 1150.49, 1134.53, 1126.65, 1209.66, 1198.99, 1155.74, 1137.74, 1135.37, 1164.71, 1195.0, 1185.5, 1144.34, 1212.26, 1203.08, 1186.11, 1190.99, 1193.04, 1185.14, 1190.57, 1196.14, 1166.54, 1171.55, 1169.78, 1182.75, 1180.74, 1177.95, 1191.22, 1199.3, 1192.46, 1175.57, 1165.93, 1180.53, 1195.74, 1185.56, 1206.7, 1208.27, 1183.41, 1204.1, 1209.09, 1186.07, 1200.26, 1192.94, 1199.0, 1196.21, 1195.69, 1192.0, 1192.19, 1177.97, 1182.67, 1171.52, 1195.08, 1194.28, 1201.57],
                y: [672.67, 666.16, 661.38, 659.52, 658.75, 659.89, 656.37, 656.16, 648.93, 651.95, 650.4, 637.92, 640.39, 625.32, 607.4, 604.01, 601.71, 574.79, 577.58, 562.11, 552.44, 546.02, 547.13, 563.18, 560.47, 584.36, 595.08, 596.21, 596.93, 677.23, 667.24, 785.52, 859.01, 868.44, 870.55, 912.72, 925.23, 925.79, 838.05, 828.69, 723.1, 615.26, 619.14, 617.62, 562.41, 562.11, 545.67, 552.12, 548.89, 547.95, 596.65, 599.79, 676.45, 743.17, 742.83, 743.92, 776.78, 788.53, 738.23, 650.46, 651.9, 554.9, 487.73, 485.62, 486.24, 455.09, 455.76, 450.69, 494.55, 493.17, 567.76, 640.67, 644.52, 641.63, 703.97, 705.96, 689.85, 612.75, 614.0, 614.3, 525.01, 521.19, 472.54, 452.7, 451.87, 450.32, 459.7, 459.35, 459.13, 476.2, 479.95, 557.5, 619.57, 617.24, 619.72, 651.78, 670.14, 674.02, 650.34, 649.36, 596.25, 530.49, 535.62, 488.96, 464.9, 470.98, 457.41, 492.94, 488.23, 541.12, 613.08, 609.52, 685.38, 768.91, 784.6, 749.85, 657.75, 665.06, 587.36, 517.64, 521.52, 517.65, 496.04, 507.01, 518.74, 533.19, 535.81, 609.99, 686.8, 685.92, 741.35, 713.58, 726.83, 620.82, 551.38, 559.08, 502.48, 477.28, 481.96, 470.52, 493.3, 492.72, 537.97, 651.87, 659.25, 754.24, 800.29, 806.89, 692.86, 618.28, 616.08, 517.46, 465.65, 464.22, 447.05, 493.67, 492.85, 491.76, 558.65, 648.1, 647.63, 696.4, 701.34, 721.65, 672.26, 678.14, 618.89, 580.96, 578.48, 540.13, 523.42, 531.51, 553.14, 615.65, 617.56, 620.59, 598.55, 605.5, 594.76, 599.02, 594.89, 600.41, 598.79, 610.18, 619.25, 622.73, 620.39, 613.37, 625.31, 617.4, 630.39, 651.33, 655.89, 669.17, 610.2, 615.72, 572.33, 532.63, 529.02, 525.65, 532.66, 544.19, 615.28, 678.74, 675.05, 766.48, 895.08, 883.12, 895.51, 806.41, 793.64, 706.11, 654.1, 648.91, 615.9, 602.11, 596.28, 618.53, 681.68, 685.38, 759.22, 818.59, 813.66, 793.94, 715.05, 715.87, 651.94, 543.07, 545.38, 391.53, 362.11, 360.68, 365.74, 396.65, 395.6, 684.92, 414.66, 432.47, 424.75, 419.19, 420.24, 479.69, 462.79, 474.81, 526.67, 517.86, 513.54, 504.07, 495.04, 501.83, 834.67, 493.93, 486.01, 540.17, 519.5, 485.78, 522.91, 946.15, 994.95, 1006.67, 852.19, 552.69, 544.61, 514.74, 542.79, 909.65, 737.12, 554.13, 530.76, 533.21, 787.8, 568.47, 565.43, 831.51, 585.71, 594.17, 604.08, 601.78, 595.66, 593.31, 711.05, 711.86, 590.09, 811.33, 829.37, 581.0, 594.42, 599.84, 632.9, 562.19, 550.82, 574.23, 569.25, 581.63, 622.49, 662.36, 558.9, 757.87, 788.79, 571.02, 608.29, 628.51, 577.88, 553.65, 544.85, 543.59, 735.17, 610.84, 608.63, 757.24, 764.72, 553.68, 587.98, 585.24, 589.2],
                mode: 'markers+lines',
                type: 'scatter',
                marker: {
                    size: 6,
                    color: Array.from({length: 315}, (_, i) => i),
                    colorscale: 'Plasma',
                    showscale: true,
                    colorbar: {
                        title: 'Time',
                        titleside: 'right',
                        tickfont: { color: '#b0b0b0' },
                        titlefont: { color: '#ffffff' }
                    }
                },
                line: {
                    color: '#42A5F5',
                    width: 1.5,
                    opacity: 0.4
                },
                name: 'Finger Trace'
            };

            const startPoint = {
                x: [1296.79],
                y: [672.67],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#66BB6A',
                    symbol: 'circle',
                    line: { color: 'white', width: 2 }
                },
                name: 'Start'
            };

            const endPoint = {
                x: [1201.57],
                y: [589.2],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#EF5350',
                    symbol: 'triangle-up',
                    line: { color: 'white', width: 2 }
                },
                name: 'End'
            };

            const pathLayout = {
                ...darkLayout,
                xaxis: {
                    title: 'X Position (pixels)',
                    gridcolor: '#424242',
                    scaleanchor: 'y'
                },
                yaxis: {
                    title: 'Y Position (pixels)',
                    gridcolor: '#424242'
                },
                showlegend: true,
                legend: {
                    x: 1,
                    xanchor: 'right',
                    y: 1,
                    bgcolor: 'rgba(45,45,45,0.8)'
                },
                margin: { l: 60, r: 40, t: 20, b: 60 }
            };

            Plotly.newPlot('path-chart', [pathData, startPoint, endPoint], pathLayout, {responsive: true});
        
    </script>
</body>
</html>