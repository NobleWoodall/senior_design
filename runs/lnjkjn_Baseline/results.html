<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRgFUS Tremor Assessment - Clinical Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .card {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
            color: white;
            padding: 32px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 40px;
            margin-top: 20px;
        }

        .patient-info {
            flex: 1;
        }

        .patient-info p {
            font-size: 1.1em;
            margin: 8px 0;
            opacity: 0.95;
        }

        .key-metrics {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            min-width: 300px;
        }

        .key-metrics h3 {
            margin-bottom: 16px;
            font-weight: 500;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: rgba(255,255,255,0.8);
        }

        .metric-value {
            font-weight: 600;
            font-size: 1.1em;
        }

        .assessment {
            background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
            color: white;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .assessment.warning {
            background: linear-gradient(135deg, #F57C00 0%, #E65100 100%);
        }

        .assessment.alert {
            background: linear-gradient(135deg, #C62828 0%, #B71C1C 100%);
        }

        .assessment h2 {
            margin-bottom: 12px;
            font-size: 1.8em;
        }

        .assessment p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .chart-container {
            width: 100%;
            height: 600px;
            background: #2d2d2d;
            border-radius: 8px;
            padding: 16px;
        }

        .chart-title {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #ffffff;
            font-weight: 500;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: #2d2d2d;
            padding: 24px;
            border-radius: 8px;
        }

        .metric-card h3 {
            color: #42A5F5;
            margin-bottom: 16px;
            font-size: 1.3em;
            border-bottom: 2px solid #42A5F5;
            padding-bottom: 8px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #424242;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-item-label {
            color: #b0b0b0;
        }

        .metric-item-value {
            font-weight: 600;
            color: #ffffff;
        }

        @media (max-width: 768px) {
            .header-info {
                flex-direction: column;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
    <div class="header">
        <h1>TREMOR ASSESSMENT</h1>
        <div class="header-info">
            <div class="patient-info">
                <p><strong>Patient:</strong> lnjkjn</p>
                <p><strong>Session:</strong> BASELINE SESSION</p>
                <p><strong>Date:</strong> 2025-11-09</p>
            </div>
            <div class="key-metrics">
                <h3>KEY MEASUREMENTS</h3>
                <div class="metric-row">
                    <span class="metric-label">Tremor Band RMS</span>
                    <span class="metric-value">5.70 px</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Peak Frequency</span>
                    <span class="metric-value">4.69 Hz</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Overall RMS</span>
                    <span class="metric-value">160.24 px</span>
                </div>
                
            </div>
        </div>
    </div>
    

        

        <div class="card">
            <h2 class="chart-title">360Â° DIRECTIONAL TREMOR ANALYSIS</h2>
            <div id="directional-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">TREMOR BAND FREQUENCY ANALYSIS (4-10 Hz)</h2>
            <div id="frequency-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">FINGER TRACE PATH</h2>
            <div id="path-chart" class="chart-container"></div>
        </div>

        <div class="metrics-grid">
            
    <div class="metric-card">
        <h3>SIGNAL ANALYSIS DETAILS</h3>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Power</span>
            <span class="metric-item-value">41.9821</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Range</span>
            <span class="metric-item-value">4.0 - 10.0 Hz</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Resampled Length</span>
            <span class="metric-item-value">590 samples</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Sampling Rate</span>
            <span class="metric-item-value">30.0 Hz</span>
        </div>
    </div>
    
            
    <div class="metric-card">
        <h3>TRACKING PERFORMANCE</h3>
        <div class="metric-item">
            <span class="metric-item-label">Duration</span>
            <span class="metric-item-value">19.67 sec</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Total Frames</span>
            <span class="metric-item-value">320</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Average FPS</span>
            <span class="metric-item-value">16.27</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tracking Loss Rate</span>
            <span class="metric-item-value">0.0%</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Mean Error</span>
            <span class="metric-item-value">406.60 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Median Error</span>
            <span class="metric-item-value">417.24 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">95th Percentile</span>
            <span class="metric-item-value">837.19 px</span>
        </div>
    </div>
    
        </div>
    </div>

    <script>
        // Plotly chart configurations
        const darkLayout = {
            paper_bgcolor: '#2d2d2d',
            plot_bgcolor: '#2d2d2d',
            font: { color: '#e0e0e0' },
            xaxis: { gridcolor: '#424242', zerolinecolor: '#424242' },
            yaxis: { gridcolor: '#424242', zerolinecolor: '#424242' }
        };

        // Frequency chart
        
        const freqData = {
            x: [4.081632653061224, 4.285714285714286, 4.489795918367347, 4.693877551020408, 4.897959183673469, 5.10204081632653, 5.3061224489795915, 5.5102040816326525, 5.7142857142857135, 5.9183673469387745, 6.122448979591836, 6.326530612244897, 6.530612244897958, 6.7346938775510194, 6.9387755102040805, 7.142857142857142, 7.346938775510203, 7.551020408163264, 7.755102040816325, 7.959183673469387, 8.163265306122447, 8.367346938775508, 8.571428571428571, 8.775510204081632, 8.979591836734693, 9.183673469387754, 9.387755102040815, 9.591836734693876, 9.795918367346937, 9.999999999999998],
            y: [9.517649840181855, 7.395842617330989, 14.069214656522298, 15.131608852048018, 12.202012026393197, 10.927946331948169, 11.226480805901533, 10.76698623631084, 10.528288017373333, 10.68808776220619, 9.899858971289662, 7.492278029090979, 6.892603060215848, 6.5839847133723, 6.222873089485669, 6.6732449561461715, 7.6377464588129955, 8.035652862804154, 6.2846289553224475, 3.7543033174448905, 3.1873808232054626, 3.073084709996324, 3.8540681346455163, 4.896393394845783, 3.7294086416391576, 2.1556673410793734, 1.6913865400355304, 2.112576561728622, 2.567687405879979, 2.543961290261406],
            type: 'scatter',
            mode: 'lines',
            line: { color: '#42A5F5', width: 3 },
            fill: 'tozeroy',
            fillcolor: 'rgba(66, 165, 245, 0.3)',
            name: 'Tremor Band PSD (4-10 Hz)'
        };

        const peakLine = {
            x: [4.693877551020408, 4.693877551020408],
            y: [0, 15.131608852048018],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#EF5350', width: 2, dash: 'dash' },
            marker: { size: 10, symbol: 'diamond' },
            name: 'Peak Tremor: 4.69 Hz'
        };

        const freqLayout = {
            ...darkLayout,
            xaxis: {
                title: 'Frequency (Hz)',
                gridcolor: '#424242',
                range: [4, 10]  // Lock to tremor band
            },
            yaxis: {
                title: 'Power Spectral Density (Tremor Band)',
                gridcolor: '#424242'
            },
            showlegend: true,
            legend: {
                x: 1,
                xanchor: 'right',
                y: 1,
                bgcolor: 'rgba(45,45,45,0.8)'
            },
            margin: { l: 60, r: 40, t: 20, b: 60 }
        };

        Plotly.newPlot('frequency-chart', [freqData, peakLine], freqLayout, {responsive: true});
    

        // Directional chart
        
        const dirData = {
            r: [8494.254601565977, 11243.7685636705, 9042.36039631086, 3496.4664088167983, 3215.356089868053, 7028.43113828553, 18631.66008212859, 32435.124348165224, 6496.502368674648, 6564.862401495784, 13153.59852487373, 3991.596833424289, 15559.936648830802, 5188.250094436717, 5639.4145542001925, 3406.2613370319, 2497.4859033880257, 3618.2653694833634, 10144.004264325355, 16772.860532993654, 6059.0998060254615, 5129.060837241263, 2827.66662258383, 5719.892465428604, 15768.061028650458, 27193.27545695489, 13470.097740996916, 7428.618540788713, 12489.772363143933, 3645.743237774722, 17827.71300531615, 4512.084177744046, 3003.8900717967554, 4124.270899389211, 2626.260465868557, 7023.334518239068],
            theta: [5.0, 15.0, 25.0, 35.0, 45.0, 55.0, 65.0, 75.0, 85.0, 95.0, 105.0, 115.0, 125.0, 135.0, 145.0, 155.0, 165.0, 175.0, 185.0, 195.0, 205.0, 215.0, 225.0, 235.0, 245.0, 255.0, 265.0, 275.0, 285.0, 295.0, 305.0, 315.0, 325.0, 335.0, 345.0, 355.0],
            type: 'barpolar',
            marker: {
                color: ["#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#EF5350", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#66BB6A", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5"],
                line: { color: '#2d2d2d', width: 1 }
            },
            opacity: 0.8
        };

        const dirLayout = {
            ...darkLayout,
            polar: {
                radialaxis: {
                    visible: true,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                angularaxis: {
                    direction: 'counterclockwise',
                    rotation: 0,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                bgcolor: '#2d2d2d'
            },
            showlegend: false,
            margin: { l: 80, r: 80, t: 40, b: 80 }
        };

        Plotly.newPlot('directional-chart', [dirData], dirLayout, {responsive: true});
    

        // Path chart
        
            // Finger tracking path with time gradient
            const pathData = {
                x: [1454.39, 1520.47, 1528.09, 1535.37, 1524.43, 1537.54, 1539.1, 1548.83, 1547.13, 1546.39, 1529.28, 1525.42, 1535.94, 1293.41, 997.27, 961.96, 957.34, 973.79, 991.84, 817.44, 813.56, 748.13, 702.57, 718.91, 746.26, 835.88, 863.13, 864.06, 853.25, 847.92, 848.27, 859.25, 915.62, 927.12, 928.37, 928.43, 923.32, 917.8, 909.58, 903.95, 875.54, 863.69, 862.33, 859.28, 853.97, 806.46, 776.06, 766.41, 763.88, 757.83, 752.88, 755.74, 757.09, 762.24, 790.97, 804.9, 812.49, 800.09, 792.62, 779.28, 768.06, 762.76, 768.77, 777.8, 785.06, 788.41, 793.63, 798.86, 841.17, 853.63, 861.52, 864.74, 869.44, 874.77, 871.18, 863.22, 854.73, 806.9, 793.69, 783.04, 772.62, 765.47, 793.29, 806.53, 812.65, 797.46, 815.96, 815.2, 809.61, 830.48, 820.56, 818.01, 790.35, 780.51, 784.32, 805.72, 806.8, 814.3, 846.35, 840.88, 854.89, 874.78, 887.94, 875.9, 897.07, 962.13, 973.24, 986.65, 997.32, 1043.5, 1056.13, 1073.05, 1085.95, 1097.51, 1185.65, 1191.71, 1176.85, 1178.85, 1099.6, 1116.54, 1457.15, 1462.99, 1477.79, 1474.29, 1488.77, 1505.52, 1503.44, 1494.77, 1505.55, 1485.48, 1475.33, 1467.61, 1490.12, 1469.77, 1481.71, 1484.03, 1486.22, 1475.79, 1487.72, 1493.12, 1487.7, 1489.97, 1503.14, 1491.78, 1491.05, 1486.96, 1498.2, 1494.41, 1493.09, 1485.53, 1490.14, 1488.92, 1486.33, 1481.21, 1481.07, 1480.05, 1477.87, 1474.53, 1477.01, 1478.09, 1474.98, 1472.47, 1472.44, 1466.03, 1481.17, 1474.86, 1477.91, 1462.99, 1475.1, 1473.67, 1485.69, 1478.65, 1466.49, 1481.23, 1458.09, 1476.6, 1467.19, 1470.59, 1493.98, 1495.68, 1483.5, 1490.08, 1490.5, 1494.74, 1510.67, 1507.73, 1514.98, 1505.02, 1510.41, 1500.89, 1492.88, 1488.25, 1492.73, 1477.8, 1477.14, 1478.03, 1469.83, 1458.56, 1459.93, 1460.04, 1457.49, 1463.54, 1453.62, 1450.92, 1454.97, 1454.44, 1444.41, 1440.95, 1445.4, 1440.22, 1441.9, 1442.11, 1442.54, 1441.89, 1443.38, 1442.76, 1446.79, 1448.26, 1449.37, 1455.66, 1455.83, 1452.04, 1457.89, 1464.95, 1459.13, 1468.09, 1463.36, 1466.85, 1462.96, 1457.19, 1461.79, 1467.21, 1489.38, 1490.0, 1495.55, 1493.87, 1487.56, 1481.72, 1488.33, 1482.27, 1487.55, 1487.98, 1481.66, 1472.13, 1504.26, 1487.14, 1481.35, 1485.47, 1505.62, 1500.95, 1500.2, 1502.06, 1495.9, 1502.6, 1506.48, 1512.33, 1516.77, 1509.13, 1529.48, 1539.4, 1546.17, 1559.03, 1636.03, 1623.45, 1644.13, 1646.81, 1665.84, 1664.99, 1666.08, 1665.01, 1664.62, 1670.97, 1688.86, 1681.82, 1689.24, 1417.14, 1442.39, 1673.35, 1478.56, 1469.78, 1480.03, 1454.94, 1464.95, 1456.83, 1442.92, 1441.33, 1455.17, 1460.54, 1453.22, 1456.53, 1433.25, 1424.57, 1426.7, 1408.52, 1390.2, 1393.37, 1378.3, 1388.59, 1375.26, 1376.94, 1369.25, 1373.77, 1383.85, 1373.59, 1381.3, 1377.33, 1378.99, 1381.68, 1371.26, 1367.9, 1370.9, 1366.83, 1362.4, 1367.43, 1375.12, 1366.69, 1364.08, 1365.22, 1365.36, 1361.55],
                y: [111.72, 750.29, 752.75, 752.47, 757.95, 751.88, 753.04, 749.52, 754.92, 764.35, 780.08, 785.22, 776.0, 14.98, 169.91, 266.6, 361.01, 468.58, 571.33, 852.6, 832.41, 854.77, 941.99, 972.0, 1010.49, 1123.16, 1136.54, 1165.77, 1149.69, 1127.61, 1116.87, 1112.09, 1049.55, 1025.65, 1023.53, 954.7, 939.96, 926.41, 916.02, 908.04, 887.43, 881.47, 878.28, 881.91, 880.26, 862.26, 840.86, 826.84, 826.95, 811.99, 780.53, 777.95, 778.32, 777.3, 771.22, 764.93, 755.46, 689.84, 664.49, 646.41, 631.86, 587.36, 578.06, 570.59, 566.21, 540.13, 530.75, 525.51, 523.27, 521.89, 519.06, 518.65, 515.35, 507.87, 506.57, 501.75, 499.26, 492.97, 492.24, 488.97, 488.24, 490.93, 494.7, 503.02, 507.94, 494.03, 505.78, 507.83, 497.4, 501.72, 488.35, 484.41, 472.63, 465.16, 461.72, 467.4, 440.72, 443.46, 446.86, 426.04, 426.25, 430.59, 447.62, 392.97, 388.5, 379.94, 377.25, 379.57, 382.01, 382.83, 381.62, 386.42, 387.89, 388.64, 414.92, 394.53, 358.86, 295.1, 91.93, -105.73, 845.29, 841.78, 843.25, 843.82, 837.78, 833.0, 836.85, 842.49, 835.71, 851.44, 845.56, 840.6, 851.81, 839.47, 846.5, 836.78, 847.39, 849.51, 836.34, 841.06, 842.61, 842.15, 835.1, 843.26, 841.76, 840.03, 840.53, 839.31, 842.76, 844.24, 844.57, 842.78, 842.01, 842.06, 839.61, 843.27, 844.75, 843.73, 844.63, 847.62, 843.76, 839.34, 849.52, 846.69, 837.9, 835.87, 846.19, 846.47, 840.3, 836.44, 836.55, 840.01, 844.9, 842.21, 845.0, 842.39, 838.86, 843.17, 823.97, 830.36, 831.07, 805.68, 793.02, 785.94, 746.93, 749.33, 744.33, 745.91, 736.01, 727.71, 725.21, 719.95, 718.94, 718.63, 724.58, 723.35, 718.98, 726.41, 727.51, 728.1, 729.92, 728.01, 734.52, 739.76, 735.7, 733.95, 738.1, 743.23, 738.11, 740.62, 738.56, 739.97, 739.63, 737.51, 737.47, 741.5, 742.47, 741.01, 746.52, 744.92, 747.48, 746.91, 746.38, 749.97, 757.84, 754.85, 755.26, 756.25, 765.01, 769.14, 765.13, 768.2, 773.81, 773.47, 786.04, 779.91, 779.55, 791.07, 784.77, 790.65, 790.1, 774.66, 800.75, 813.33, 826.02, 797.76, 808.27, 799.64, 776.75, 768.41, 760.88, 752.35, 737.13, 730.95, 730.73, 714.77, 701.31, 699.4, 716.72, 702.58, 688.33, 685.11, 704.13, 701.35, 699.36, 687.52, 645.3, 624.85, 621.52, 602.46, 607.33, 637.85, 670.79, 712.87, 761.48, 762.18, 711.74, 765.15, 748.83, 735.37, 755.38, 714.08, 722.8, 720.88, 717.45, 724.09, 723.24, 733.48, 726.26, 730.25, 735.78, 730.37, 735.59, 741.82, 749.18, 759.42, 755.03, 762.65, 755.71, 763.56, 760.76, 761.87, 768.02, 767.17, 761.85, 768.87, 763.36, 766.12, 764.66, 762.49, 766.32, 763.27, 761.46, 764.82, 768.95, 765.1, 763.34, 765.84, 765.16, 762.38],
                mode: 'markers+lines',
                type: 'scatter',
                marker: {
                    size: 6,
                    color: Array.from({length: 320}, (_, i) => i),
                    colorscale: 'Plasma',
                    showscale: true,
                    colorbar: {
                        title: 'Time',
                        titleside: 'right',
                        tickfont: { color: '#b0b0b0' },
                        titlefont: { color: '#ffffff' }
                    }
                },
                line: {
                    color: '#42A5F5',
                    width: 1.5,
                    opacity: 0.4
                },
                name: 'Finger Trace'
            };

            const startPoint = {
                x: [1454.39],
                y: [111.72],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#66BB6A',
                    symbol: 'circle',
                    line: { color: 'white', width: 2 }
                },
                name: 'Start'
            };

            const endPoint = {
                x: [1361.55],
                y: [762.38],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#EF5350',
                    symbol: 'triangle-up',
                    line: { color: 'white', width: 2 }
                },
                name: 'End'
            };

            const pathLayout = {
                ...darkLayout,
                xaxis: {
                    title: 'X Position (pixels)',
                    gridcolor: '#424242',
                    scaleanchor: 'y'
                },
                yaxis: {
                    title: 'Y Position (pixels)',
                    gridcolor: '#424242'
                },
                showlegend: true,
                legend: {
                    x: 1,
                    xanchor: 'right',
                    y: 1,
                    bgcolor: 'rgba(45,45,45,0.8)'
                },
                margin: { l: 60, r: 40, t: 20, b: 60 }
            };

            Plotly.newPlot('path-chart', [pathData, startPoint, endPoint], pathLayout, {responsive: true});
        
    </script>
</body>
</html>