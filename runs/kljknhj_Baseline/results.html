<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRgFUS Tremor Assessment - Clinical Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .card {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
            color: white;
            padding: 32px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 40px;
            margin-top: 20px;
        }

        .patient-info {
            flex: 1;
        }

        .patient-info p {
            font-size: 1.1em;
            margin: 8px 0;
            opacity: 0.95;
        }

        .key-metrics {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            min-width: 300px;
        }

        .key-metrics h3 {
            margin-bottom: 16px;
            font-weight: 500;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: rgba(255,255,255,0.8);
        }

        .metric-value {
            font-weight: 600;
            font-size: 1.1em;
        }

        .assessment {
            background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
            color: white;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .assessment.warning {
            background: linear-gradient(135deg, #F57C00 0%, #E65100 100%);
        }

        .assessment.alert {
            background: linear-gradient(135deg, #C62828 0%, #B71C1C 100%);
        }

        .assessment h2 {
            margin-bottom: 12px;
            font-size: 1.8em;
        }

        .assessment p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .chart-container {
            width: 100%;
            height: 600px;
            background: #2d2d2d;
            border-radius: 8px;
            padding: 16px;
        }

        .chart-title {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #ffffff;
            font-weight: 500;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: #2d2d2d;
            padding: 24px;
            border-radius: 8px;
        }

        .metric-card h3 {
            color: #42A5F5;
            margin-bottom: 16px;
            font-size: 1.3em;
            border-bottom: 2px solid #42A5F5;
            padding-bottom: 8px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #424242;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-item-label {
            color: #b0b0b0;
        }

        .metric-item-value {
            font-weight: 600;
            color: #ffffff;
        }

        @media (max-width: 768px) {
            .header-info {
                flex-direction: column;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
    <div class="header">
        <h1>TREMOR ASSESSMENT</h1>
        <div class="header-info">
            <div class="patient-info">
                <p><strong>Patient:</strong> kljknhj</p>
                <p><strong>Session:</strong> BASELINE SESSION</p>
                <p><strong>Date:</strong> 2025-11-09</p>
            </div>
            <div class="key-metrics">
                <h3>KEY MEASUREMENTS</h3>
                <div class="metric-row">
                    <span class="metric-label">Tremor Band RMS</span>
                    <span class="metric-value">2.26 px</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Peak Frequency</span>
                    <span class="metric-value">4.64 Hz</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Overall RMS</span>
                    <span class="metric-value">203.48 px</span>
                </div>
                
            </div>
        </div>
    </div>
    

        

        <div class="card">
            <h2 class="chart-title">360Â° DIRECTIONAL TREMOR ANALYSIS</h2>
            <div id="directional-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">TREMOR BAND FREQUENCY ANALYSIS (4-10 Hz)</h2>
            <div id="frequency-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">FINGER TRACE PATH</h2>
            <div id="path-chart" class="chart-container"></div>
        </div>

        <div class="metrics-grid">
            
    <div class="metric-card">
        <h3>SIGNAL ANALYSIS DETAILS</h3>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Power</span>
            <span class="metric-item-value">6.9648</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Range</span>
            <span class="metric-item-value">4.0 - 10.0 Hz</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Resampled Length</span>
            <span class="metric-item-value">388 samples</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Sampling Rate</span>
            <span class="metric-item-value">30.0 Hz</span>
        </div>
    </div>
    
            
    <div class="metric-card">
        <h3>TRACKING PERFORMANCE</h3>
        <div class="metric-item">
            <span class="metric-item-label">Duration</span>
            <span class="metric-item-value">12.95 sec</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Total Frames</span>
            <span class="metric-item-value">159</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Average FPS</span>
            <span class="metric-item-value">12.28</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tracking Loss Rate</span>
            <span class="metric-item-value">0.0%</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Mean Error</span>
            <span class="metric-item-value">539.72 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Median Error</span>
            <span class="metric-item-value">545.34 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">95th Percentile</span>
            <span class="metric-item-value">695.57 px</span>
        </div>
    </div>
    
        </div>
    </div>

    <script>
        // Plotly chart configurations
        const darkLayout = {
            paper_bgcolor: '#2d2d2d',
            plot_bgcolor: '#2d2d2d',
            font: { color: '#e0e0e0' },
            xaxis: { gridcolor: '#424242', zerolinecolor: '#424242' },
            yaxis: { gridcolor: '#424242', zerolinecolor: '#424242' }
        };

        // Frequency chart
        
        const freqData = {
            x: [4.020618556701031, 4.3298969072164954, 4.639175257731959, 4.948453608247423, 5.257731958762887, 5.56701030927835, 5.876288659793815, 6.185567010309279, 6.494845360824742, 6.804123711340207, 7.113402061855671, 7.422680412371134, 7.731958762886598, 8.041237113402062, 8.350515463917526, 8.659793814432991, 8.969072164948454, 9.278350515463918, 9.587628865979381, 9.896907216494846],
            y: [2.272187123783643, 1.6335284397690646, 3.136859587937575, 2.715351901128672, 2.080155890138468, 2.6700200963377374, 2.167771577582235, 1.6384630624720975, 1.2614600453284222, 1.2208130663024697, 0.9438459555760598, 0.6615471464031503, 0.4026189661399476, 0.25981833982735175, 0.1742020076798053, 0.18295341720743255, 0.0731553133050971, 0.05941621997777233, 0.07803842333433735, 0.04686413618690657],
            type: 'scatter',
            mode: 'lines',
            line: { color: '#42A5F5', width: 3 },
            fill: 'tozeroy',
            fillcolor: 'rgba(66, 165, 245, 0.3)',
            name: 'Tremor Band PSD (4-10 Hz)'
        };

        const peakLine = {
            x: [4.639175257731959, 4.639175257731959],
            y: [0, 3.136859587937575],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#EF5350', width: 2, dash: 'dash' },
            marker: { size: 10, symbol: 'diamond' },
            name: 'Peak Tremor: 4.64 Hz'
        };

        const freqLayout = {
            ...darkLayout,
            xaxis: {
                title: 'Frequency (Hz)',
                gridcolor: '#424242',
                range: [4, 10]  // Lock to tremor band
            },
            yaxis: {
                title: 'Power Spectral Density (Tremor Band)',
                gridcolor: '#424242'
            },
            showlegend: true,
            legend: {
                x: 1,
                xanchor: 'right',
                y: 1,
                bgcolor: 'rgba(45,45,45,0.8)'
            },
            margin: { l: 60, r: 40, t: 20, b: 60 }
        };

        Plotly.newPlot('frequency-chart', [freqData, peakLine], freqLayout, {responsive: true});
    

        // Directional chart
        
        const dirData = {
            r: [2679.1312894463313, 1613.6639541358652, 752.8507364666089, 1694.6306254276444, 2116.0148799707404, 1924.8495947212793, 3110.9052951737854, 1878.1012493795572, 1310.0728959092676, 1914.629415756007, 2540.7514246555274, 4013.014149061042, 1469.2518112790876, 536.1213199907232, 2058.998634657709, 306.2991665469758, 2371.2730535875266, 3483.49672315716, 2015.244136485406, 1033.3164310780699, 1288.4749188158146, 1600.7834084912213, 873.683126370474, 3507.954001971405, 1825.877920819542, 1583.8159938682902, 1433.479155060643, 1536.9136752931902, 2698.636645482016, 3732.1636920470587, 1425.3359364135513, 725.1358219607706, 2654.8617132840236, 625.3286701764372, 1673.9475911076497, 2335.3984462056815],
            theta: [5.0, 15.0, 25.0, 35.0, 45.0, 55.0, 65.0, 75.0, 85.0, 95.0, 105.0, 115.0, 125.0, 135.0, 145.0, 155.0, 165.0, 175.0, 185.0, 195.0, 205.0, 215.0, 225.0, 235.0, 245.0, 255.0, 265.0, 275.0, 285.0, 295.0, 305.0, 315.0, 325.0, 335.0, 345.0, 355.0],
            type: 'barpolar',
            marker: {
                color: ["#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#EF5350", "#42A5F5", "#42A5F5", "#42A5F5", "#66BB6A", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5"],
                line: { color: '#2d2d2d', width: 1 }
            },
            opacity: 0.8
        };

        const dirLayout = {
            ...darkLayout,
            polar: {
                radialaxis: {
                    visible: true,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                angularaxis: {
                    direction: 'counterclockwise',
                    rotation: 0,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                bgcolor: '#2d2d2d'
            },
            showlegend: false,
            margin: { l: 80, r: 80, t: 40, b: 80 }
        };

        Plotly.newPlot('directional-chart', [dirData], dirLayout, {responsive: true});
    

        // Path chart
        
            // Finger tracking path with time gradient
            const pathData = {
                x: [1644.9, 1645.16, 1643.34, 1644.56, 1647.67, 1646.54, 1646.36, 1648.94, 1649.04, 1651.18, 1650.08, 1647.43, 1651.3, 1651.07, 1649.24, 1649.05, 1649.55, 1650.87, 1649.65, 1652.14, 1649.44, 1648.55, 1651.32, 1650.45, 1652.59, 1649.93, 1649.58, 1651.36, 1650.76, 1653.23, 1651.91, 1650.88, 1653.49, 1647.69, 1650.58, 1650.66, 1646.43, 1633.8, 1629.81, 1625.8, 1619.39, 1615.26, 1612.2, 1612.0, 1618.67, 1619.28, 1623.59, 1621.69, 1613.86, 1610.64, 1604.64, 1601.01, 1594.27, 1595.92, 1597.19, 1596.73, 1597.67, 1607.78, 1615.32, 1627.04, 1638.76, 1671.21, 1664.62, 1672.44, 1692.11, 1692.56, 1709.87, 1713.58, 1735.48, 1719.38, 1703.85, 1690.63, 1662.67, 1640.69, 1590.25, 1562.11, 1526.7, 1522.45, 1517.69, 1507.99, 1506.33, 1491.06, 1491.95, 1493.86, 1492.45, 1509.77, 1529.2, 1595.76, 1599.03, 1607.73, 1619.63, 1614.47, 1623.37, 1629.23, 1626.61, 1627.52, 1633.79, 1633.6, 1628.99, 1631.29, 1640.9, 1643.49, 1648.83, 1685.5, 1682.17, 1694.12, 1696.53, 1698.69, 1702.49, 1700.55, 1704.63, 1701.56, 1696.69, 1688.66, 1674.93, 1671.54, 1665.1, 1665.03, 1653.31, 1655.19, 1654.25, 1652.5, 1655.21, 1657.14, 1653.81, 1655.42, 1654.58, 1654.18, 1655.17, 1657.19, 1654.62, 1660.16, 1666.11, 1666.75, 1676.04, 1675.05, 1682.9, 1686.34, 1685.05, 1688.22, 1692.44, 1699.62, 1694.85, 1703.73, 1703.15, 1709.58, 1712.79, 1717.71, 1718.99, 1738.65, 1737.77, 1734.24, 1739.03, 1749.1, 1759.94, 1795.34, 1805.64, 1788.15, 1778.47],
                y: [735.59, 741.43, 734.51, 732.12, 735.42, 732.95, 735.23, 733.27, 738.95, 736.46, 738.31, 731.39, 736.31, 740.41, 734.85, 736.81, 734.44, 736.39, 736.74, 741.75, 737.0, 738.04, 740.89, 741.96, 743.96, 743.73, 740.91, 743.29, 740.46, 745.64, 743.85, 740.56, 741.91, 737.23, 739.55, 742.46, 755.18, 735.83, 735.22, 734.3, 728.3, 719.54, 721.88, 725.67, 731.87, 731.05, 735.5, 732.81, 734.09, 728.73, 730.65, 727.32, 726.71, 721.46, 723.81, 721.38, 722.92, 721.33, 715.67, 701.86, 707.62, 640.72, 643.76, 630.58, 631.73, 615.29, 598.08, 594.15, 570.12, 557.34, 555.37, 548.6, 528.44, 535.68, 522.09, 544.67, 564.1, 569.11, 576.93, 604.04, 616.28, 640.35, 636.86, 663.76, 664.16, 671.26, 663.89, 673.51, 699.89, 715.63, 708.23, 702.58, 707.65, 705.06, 729.27, 724.18, 728.52, 726.62, 736.24, 735.09, 754.88, 765.54, 756.64, 792.13, 765.28, 771.07, 751.02, 748.98, 757.83, 755.18, 764.04, 765.09, 764.22, 768.37, 771.08, 774.82, 771.86, 772.38, 756.83, 770.61, 774.46, 772.32, 768.98, 769.73, 765.37, 765.3, 769.92, 768.79, 770.89, 767.39, 770.13, 756.89, 770.6, 762.8, 769.11, 761.69, 773.39, 774.66, 766.82, 772.06, 762.05, 769.26, 765.75, 762.54, 764.68, 768.76, 773.54, 771.4, 771.28, 787.36, 785.41, 792.06, 783.61, 777.36, 776.98, 792.15, 786.04, 807.02, 800.3],
                mode: 'markers+lines',
                type: 'scatter',
                marker: {
                    size: 6,
                    color: Array.from({length: 159}, (_, i) => i),
                    colorscale: 'Plasma',
                    showscale: true,
                    colorbar: {
                        title: 'Time',
                        titleside: 'right',
                        tickfont: { color: '#b0b0b0' },
                        titlefont: { color: '#ffffff' }
                    }
                },
                line: {
                    color: '#42A5F5',
                    width: 1.5,
                    opacity: 0.4
                },
                name: 'Finger Trace'
            };

            const startPoint = {
                x: [1644.9],
                y: [735.59],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#66BB6A',
                    symbol: 'circle',
                    line: { color: 'white', width: 2 }
                },
                name: 'Start'
            };

            const endPoint = {
                x: [1778.47],
                y: [800.3],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#EF5350',
                    symbol: 'triangle-up',
                    line: { color: 'white', width: 2 }
                },
                name: 'End'
            };

            const pathLayout = {
                ...darkLayout,
                xaxis: {
                    title: 'X Position (pixels)',
                    gridcolor: '#424242',
                    scaleanchor: 'y'
                },
                yaxis: {
                    title: 'Y Position (pixels)',
                    gridcolor: '#424242'
                },
                showlegend: true,
                legend: {
                    x: 1,
                    xanchor: 'right',
                    y: 1,
                    bgcolor: 'rgba(45,45,45,0.8)'
                },
                margin: { l: 60, r: 40, t: 20, b: 60 }
            };

            Plotly.newPlot('path-chart', [pathData, startPoint, endPoint], pathLayout, {responsive: true});
        
    </script>
</body>
</html>