<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRgFUS Tremor Assessment - Clinical Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #1a1a1a;
            color: #e0e0e0;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .card {
            background: #2d2d2d;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .header {
            background: linear-gradient(135deg, #1565C0 0%, #0D47A1 100%);
            color: white;
            padding: 32px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 12px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 40px;
            margin-top: 20px;
        }

        .patient-info {
            flex: 1;
        }

        .patient-info p {
            font-size: 1.1em;
            margin: 8px 0;
            opacity: 0.95;
        }

        .key-metrics {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            min-width: 300px;
        }

        .key-metrics h3 {
            margin-bottom: 16px;
            font-weight: 500;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: rgba(255,255,255,0.8);
        }

        .metric-value {
            font-weight: 600;
            font-size: 1.1em;
        }

        .assessment {
            background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
            color: white;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        .assessment.warning {
            background: linear-gradient(135deg, #F57C00 0%, #E65100 100%);
        }

        .assessment.alert {
            background: linear-gradient(135deg, #C62828 0%, #B71C1C 100%);
        }

        .assessment h2 {
            margin-bottom: 12px;
            font-size: 1.8em;
        }

        .assessment p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .chart-container {
            width: 100%;
            height: 600px;
            background: #2d2d2d;
            border-radius: 8px;
            padding: 16px;
        }

        .chart-title {
            font-size: 1.5em;
            margin-bottom: 16px;
            color: #ffffff;
            font-weight: 500;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: #2d2d2d;
            padding: 24px;
            border-radius: 8px;
        }

        .metric-card h3 {
            color: #42A5F5;
            margin-bottom: 16px;
            font-size: 1.3em;
            border-bottom: 2px solid #42A5F5;
            padding-bottom: 8px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #424242;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-item-label {
            color: #b0b0b0;
        }

        .metric-item-value {
            font-weight: 600;
            color: #ffffff;
        }

        @media (max-width: 768px) {
            .header-info {
                flex-direction: column;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        
    <div class="header">
        <h1>TREMOR ASSESSMENT</h1>
        <div class="header-info">
            <div class="patient-info">
                <p><strong>Patient:</strong> Andrew</p>
                <p><strong>Session:</strong> BASELINE SESSION</p>
                <p><strong>Date:</strong> 2025-11-08</p>
            </div>
            <div class="key-metrics">
                <h3>KEY MEASUREMENTS</h3>
                <div class="metric-row">
                    <span class="metric-label">Tremor Band RMS</span>
                    <span class="metric-value">8.96 px</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Peak Frequency</span>
                    <span class="metric-value">4.03 Hz</span>
                </div>
                <div class="metric-row">
                    <span class="metric-label">Overall RMS</span>
                    <span class="metric-value">50.17 px</span>
                </div>
                
            </div>
        </div>
    </div>
    

        

        <div class="card">
            <h2 class="chart-title">360Â° DIRECTIONAL TREMOR ANALYSIS</h2>
            <div id="directional-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">TREMOR BAND FREQUENCY ANALYSIS (4-10 Hz)</h2>
            <div id="frequency-chart" class="chart-container"></div>
        </div>

        <div class="card">
            <h2 class="chart-title">FINGER TRACE PATH</h2>
            <div id="path-chart" class="chart-container"></div>
        </div>

        <div class="metrics-grid">
            
    <div class="metric-card">
        <h3>SIGNAL ANALYSIS DETAILS</h3>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Power</span>
            <span class="metric-item-value">82.5010</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tremor Band Range</span>
            <span class="metric-item-value">4.0 - 10.0 Hz</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Resampled Length</span>
            <span class="metric-item-value">598 samples</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Sampling Rate</span>
            <span class="metric-item-value">30.0 Hz</span>
        </div>
    </div>
    
            
    <div class="metric-card">
        <h3>TRACKING PERFORMANCE</h3>
        <div class="metric-item">
            <span class="metric-item-label">Duration</span>
            <span class="metric-item-value">19.95 sec</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Total Frames</span>
            <span class="metric-item-value">326</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Average FPS</span>
            <span class="metric-item-value">16.34</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Tracking Loss Rate</span>
            <span class="metric-item-value">0.0%</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Mean Error</span>
            <span class="metric-item-value">80.25 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">Median Error</span>
            <span class="metric-item-value">65.88 px</span>
        </div>
        <div class="metric-item">
            <span class="metric-item-label">95th Percentile</span>
            <span class="metric-item-value">188.87 px</span>
        </div>
    </div>
    
        </div>
    </div>

    <script>
        // Plotly chart configurations
        const darkLayout = {
            paper_bgcolor: '#2d2d2d',
            plot_bgcolor: '#2d2d2d',
            font: { color: '#e0e0e0' },
            xaxis: { gridcolor: '#424242', zerolinecolor: '#424242' },
            yaxis: { gridcolor: '#424242', zerolinecolor: '#424242' }
        };

        // Frequency chart
        
        const freqData = {
            x: [4.026845637583892, 4.228187919463087, 4.429530201342281, 4.630872483221476, 4.832214765100671, 5.033557046979865, 5.23489932885906, 5.4362416107382545, 5.6375838926174495, 5.838926174496644, 6.040268456375839, 6.241610738255033, 6.442953020134228, 6.644295302013423, 6.845637583892617, 7.046979865771812, 7.248322147651006, 7.449664429530201, 7.651006711409395, 7.85234899328859, 8.053691275167784, 8.25503355704698, 8.456375838926174, 8.657718120805368, 8.859060402684563, 9.060402684563758, 9.261744966442953, 9.463087248322147, 9.664429530201343, 9.865771812080537],
            y: [79.02812753243549, 78.33579305829635, 61.81437677110332, 33.62549615138473, 17.131400444648126, 21.429185692280118, 9.345575685573237, 6.759423537130811, 16.514920572291356, 17.122954986138495, 20.930182680589166, 15.190244397515613, 4.679387152864332, 6.349949881345023, 5.461810798874557, 4.154705982174435, 10.66733210054207, 5.75082173825896, 2.0566508490031796, 3.2667944267599065, 4.381297595794073, 2.836094812781457, 1.2818783207688504, 2.821420748376628, 5.276814931628024, 5.576810292785269, 3.725597740558557, 2.0650582382133718, 1.4113592174043967, 0.5550851955639451],
            type: 'scatter',
            mode: 'lines',
            line: { color: '#42A5F5', width: 3 },
            fill: 'tozeroy',
            fillcolor: 'rgba(66, 165, 245, 0.3)',
            name: 'Tremor Band PSD (4-10 Hz)'
        };

        const peakLine = {
            x: [4.026845637583892, 4.026845637583892],
            y: [0, 79.02812753243549],
            type: 'scatter',
            mode: 'lines+markers',
            line: { color: '#EF5350', width: 2, dash: 'dash' },
            marker: { size: 10, symbol: 'diamond' },
            name: 'Peak Tremor: 4.03 Hz'
        };

        const freqLayout = {
            ...darkLayout,
            xaxis: {
                title: 'Frequency (Hz)',
                gridcolor: '#424242',
                range: [4, 10]  // Lock to tremor band
            },
            yaxis: {
                title: 'Power Spectral Density (Tremor Band)',
                gridcolor: '#424242'
            },
            showlegend: true,
            legend: {
                x: 1,
                xanchor: 'right',
                y: 1,
                bgcolor: 'rgba(45,45,45,0.8)'
            },
            margin: { l: 60, r: 40, t: 20, b: 60 }
        };

        Plotly.newPlot('frequency-chart', [freqData, peakLine], freqLayout, {responsive: true});
    

        // Directional chart
        
        const dirData = {
            r: [6122.131885164537, 6944.311182478035, 7570.96632713415, 7796.965881502153, 9824.279345655743, 10685.528279458938, 16897.40722956113, 22943.386410591764, 22597.34890072138, 18290.798400477484, 9215.009997864228, 6028.862957289009, 6754.417926665857, 9000.266722661507, 5743.773043873447, 4764.908130692861, 5660.771008864658, 9405.023963840269, 3211.3138675650566, 5252.665613221214, 6611.825594328595, 4612.284231765266, 7223.423157548237, 10647.982805717615, 17304.952327817075, 21280.801888530037, 24183.11944035394, 17906.620789976445, 9099.592301379009, 10154.111319589803, 5717.209208692887, 3453.910328259906, 4035.771208145341, 6642.166203880072, 5979.608163204876, 2737.310611375063],
            theta: [5.0, 15.0, 25.0, 35.0, 45.0, 55.0, 65.0, 75.0, 85.0, 95.0, 105.0, 115.0, 125.0, 135.0, 145.0, 155.0, 165.0, 175.0, 185.0, 195.0, 205.0, 215.0, 225.0, 235.0, 245.0, 255.0, 265.0, 275.0, 285.0, 295.0, 305.0, 315.0, 325.0, 335.0, 345.0, 355.0],
            type: 'barpolar',
            marker: {
                color: ["#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#EF5350", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#42A5F5", "#66BB6A"],
                line: { color: '#2d2d2d', width: 1 }
            },
            opacity: 0.8
        };

        const dirLayout = {
            ...darkLayout,
            polar: {
                radialaxis: {
                    visible: true,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                angularaxis: {
                    direction: 'clockwise',
                    rotation: 90,
                    gridcolor: '#424242',
                    tickfont: { color: '#b0b0b0' }
                },
                bgcolor: '#2d2d2d'
            },
            showlegend: false,
            margin: { l: 80, r: 80, t: 40, b: 80 }
        };

        Plotly.newPlot('directional-chart', [dirData], dirLayout, {responsive: true});
    

        // Path chart
        
            // Finger tracking path with time gradient
            const pathData = {
                x: [1034.16, 1025.96, 1016.23, 1016.5, 1013.63, 1014.25, 1014.79, 1010.89, 989.41, 982.81, 985.58, 979.81, 981.53, 982.87, 996.03, 992.66, 1011.79, 1077.31, 1074.42, 1076.65, 1012.66, 1011.26, 1009.86, 1023.14, 1023.03, 1048.7, 1019.24, 1019.04, 1017.58, 1027.19, 1027.03, 1015.39, 1004.3, 999.57, 998.62, 994.73, 993.8, 993.35, 963.81, 965.55, 997.74, 950.9, 953.89, 953.65, 968.47, 962.89, 965.45, 934.38, 937.54, 974.15, 926.3, 930.73, 922.6, 886.22, 891.51, 891.37, 885.14, 887.72, 870.85, 850.63, 850.42, 836.98, 822.22, 821.31, 820.69, 836.22, 827.63, 804.84, 823.62, 818.45, 846.87, 836.02, 833.0, 874.76, 847.08, 844.12, 845.08, 849.7, 850.86, 823.19, 820.57, 822.47, 824.93, 861.1, 861.37, 827.01, 821.65, 822.94, 801.82, 801.29, 800.96, 842.88, 792.8, 796.65, 799.3, 825.54, 822.28, 818.04, 887.28, 890.74, 892.31, 910.87, 908.07, 945.05, 933.03, 932.31, 889.28, 870.44, 874.52, 900.78, 859.77, 861.34, 843.94, 830.09, 833.13, 836.12, 871.73, 868.35, 833.78, 829.0, 828.56, 879.52, 879.07, 880.91, 948.18, 918.53, 917.3, 923.25, 968.13, 959.13, 975.51, 1000.97, 1004.47, 999.73, 1040.97, 1044.48, 1007.86, 1014.71, 1014.06, 1050.64, 1039.52, 1039.23, 1069.53, 1069.32, 1070.67, 1071.88, 1158.95, 1161.13, 1125.62, 1172.83, 1154.96, 1188.13, 1191.7, 1190.7, 1191.48, 1207.34, 1200.62, 1201.54, 1242.54, 1246.12, 1207.75, 1246.97, 1237.72, 1222.75, 1218.73, 1219.14, 1218.46, 1216.8, 1215.76, 1271.12, 1260.33, 1262.5, 1292.8, 1284.65, 1284.07, 1282.89, 1275.53, 1275.98, 1283.98, 1259.56, 1261.79, 1234.07, 1224.13, 1223.57, 1211.41, 1215.37, 1214.3, 1218.89, 1205.46, 1220.1, 1180.11, 1173.99, 1173.28, 1167.62, 1162.11, 1168.82, 1131.75, 1103.17, 1105.02, 1049.62, 1020.47, 1014.52, 976.05, 947.16, 949.32, 908.87, 909.13, 909.82, 926.15, 896.38, 900.4, 888.71, 865.92, 867.52, 868.78, 855.99, 855.71, 821.6, 807.52, 811.36, 756.55, 743.87, 747.14, 718.65, 688.29, 687.4, 689.02, 619.87, 617.6, 607.2, 598.64, 596.76, 584.26, 601.36, 613.27, 561.14, 559.94, 555.45, 555.9, 564.07, 556.62, 557.1, 606.7, 604.52, 541.59, 552.24, 559.64, 550.93, 501.72, 497.68, 552.22, 508.79, 513.94, 491.08, 556.76, 551.52, 521.2, 582.76, 580.59, 573.17, 572.25, 579.36, 616.76, 608.97, 611.65, 613.27, 628.49, 628.55, 650.62, 638.19, 642.71, 668.76, 683.94, 685.38, 759.81, 792.41, 791.6, 821.28, 862.6, 861.25, 905.8, 1030.68, 1027.17, 1072.16, 1181.53, 1171.79, 1180.35, 1233.41, 1232.53, 1252.45, 1254.72, 1256.9, 1275.65, 1277.38, 1277.92, 1321.56, 1324.73, 1322.73, 1353.6, 1397.86, 1392.98, 1393.74, 1421.2, 1414.12, 1423.9, 1433.49, 1429.4, 1417.5, 1416.17, 1416.71, 1470.85, 1438.87, 1446.65, 1455.03, 1494.38, 1493.72, 1504.97, 1560.18, 1556.07, 1563.59, 1608.26, 1604.15, 1604.42, 1616.0, 1615.38, 1617.5],
                y: [538.54, 536.51, 539.55, 542.44, 542.44, 540.85, 546.15, 592.64, 571.03, 565.98, 565.81, 563.69, 558.96, 560.49, 600.33, 591.98, 562.9, 781.17, 743.24, 734.97, 567.29, 569.15, 566.08, 568.51, 569.88, 626.07, 576.2, 574.77, 575.44, 582.94, 576.47, 600.59, 597.47, 598.72, 598.18, 650.98, 649.08, 648.28, 600.96, 602.54, 706.74, 622.46, 623.6, 623.48, 708.18, 685.28, 695.36, 622.34, 622.41, 736.58, 623.52, 625.92, 624.45, 597.01, 596.52, 596.86, 594.1, 591.36, 628.17, 601.83, 604.8, 662.32, 599.79, 604.57, 603.4, 644.26, 644.98, 584.85, 585.95, 584.28, 636.03, 606.3, 606.7, 730.71, 590.95, 588.49, 589.62, 606.31, 602.19, 597.37, 581.25, 585.36, 585.64, 637.41, 629.83, 566.89, 576.44, 579.98, 581.96, 558.27, 559.76, 663.75, 554.85, 558.73, 569.23, 569.91, 572.74, 537.5, 623.93, 627.72, 523.79, 519.06, 517.85, 555.16, 460.64, 460.11, 398.24, 356.02, 353.21, 362.46, 343.06, 337.4, 332.91, 345.37, 345.64, 316.73, 380.89, 376.7, 306.67, 309.22, 308.61, 350.47, 316.99, 316.75, 508.74, 351.89, 351.17, 361.64, 380.64, 380.48, 366.22, 389.47, 392.2, 360.7, 509.72, 518.62, 349.55, 354.73, 355.36, 411.98, 370.21, 366.61, 413.62, 356.0, 355.31, 353.64, 434.71, 470.43, 344.96, 398.89, 370.68, 390.15, 391.67, 392.23, 391.48, 410.74, 388.31, 388.35, 562.08, 564.71, 409.0, 621.06, 627.67, 459.65, 447.64, 452.02, 440.42, 416.61, 412.76, 565.99, 481.18, 483.64, 704.1, 553.23, 553.92, 708.68, 556.42, 556.41, 633.54, 625.56, 624.28, 661.69, 685.59, 676.1, 690.82, 774.45, 769.88, 716.59, 803.14, 802.34, 703.18, 845.56, 856.2, 686.83, 869.35, 868.29, 732.86, 908.37, 910.99, 739.06, 859.79, 858.05, 735.22, 887.45, 887.1, 703.54, 707.84, 705.91, 871.21, 711.3, 711.75, 913.35, 728.04, 726.3, 723.53, 907.14, 901.68, 724.72, 892.39, 886.18, 716.0, 700.93, 700.65, 755.41, 674.83, 670.25, 877.56, 653.25, 651.02, 632.51, 584.26, 589.11, 634.77, 702.99, 796.0, 625.09, 581.26, 569.35, 561.93, 530.64, 552.55, 542.37, 670.84, 669.35, 521.31, 505.65, 508.33, 564.5, 515.81, 507.78, 593.2, 497.46, 501.34, 479.06, 612.98, 612.44, 446.31, 559.12, 555.85, 452.95, 440.79, 438.58, 531.56, 338.95, 340.27, 286.88, 249.42, 245.83, 216.43, 208.96, 215.42, 194.33, 187.35, 198.45, 201.97, 176.66, 173.36, 198.24, 126.74, 124.55, 100.49, 74.3, 86.56, 47.24, 183.37, 185.91, 44.79, 184.05, 189.47, 65.51, 54.61, 56.97, 47.39, 53.48, 52.89, 182.15, 99.98, 100.2, 203.93, 265.52, 276.92, 237.76, 416.77, 420.4, 306.84, 479.05, 486.8, 354.08, 346.38, 347.29, 494.92, 336.24, 343.94, 362.31, 441.76, 440.34, 429.73, 530.01, 522.51, 516.08, 722.51, 718.41, 713.82, 685.89, 684.83, 696.68],
                mode: 'markers+lines',
                type: 'scatter',
                marker: {
                    size: 6,
                    color: Array.from({length: 326}, (_, i) => i),
                    colorscale: 'Plasma',
                    showscale: true,
                    colorbar: {
                        title: 'Time',
                        titleside: 'right',
                        tickfont: { color: '#b0b0b0' },
                        titlefont: { color: '#ffffff' }
                    }
                },
                line: {
                    color: '#42A5F5',
                    width: 1.5,
                    opacity: 0.4
                },
                name: 'Finger Trace'
            };

            const startPoint = {
                x: [1034.16],
                y: [538.54],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#66BB6A',
                    symbol: 'circle',
                    line: { color: 'white', width: 2 }
                },
                name: 'Start'
            };

            const endPoint = {
                x: [1617.5],
                y: [696.68],
                mode: 'markers',
                type: 'scatter',
                marker: {
                    size: 15,
                    color: '#EF5350',
                    symbol: 'triangle-up',
                    line: { color: 'white', width: 2 }
                },
                name: 'End'
            };

            const pathLayout = {
                ...darkLayout,
                xaxis: {
                    title: 'X Position (pixels)',
                    gridcolor: '#424242',
                    scaleanchor: 'y'
                },
                yaxis: {
                    title: 'Y Position (pixels)',
                    gridcolor: '#424242'
                },
                showlegend: true,
                legend: {
                    x: 1,
                    xanchor: 'right',
                    y: 1,
                    bgcolor: 'rgba(45,45,45,0.8)'
                },
                margin: { l: 60, r: 40, t: 20, b: 60 }
            };

            Plotly.newPlot('path-chart', [pathData, startPoint, endPoint], pathLayout, {responsive: true});
        
    </script>
</body>
</html>