camera:
  width: 1920
  height: 1080
  fps: 30
  use_auto_exposure: false  # Lock exposure for consistent LED tracking
  exposure: 50  # Lower value = darker image, LED stands out more
  depth_width: 640
  depth_height: 480
  depth_fps: 30
  depth_window: 5
  min_depth_mm: 200
  max_depth_mm: 800

spiral:
  a: 30.0
  b: 40.0
  turns: 2
  theta_step: 0.01
  line_thickness: 20
  color_bgr: [40, 220, 40]

dwell:
  StartRadiusPx: 18
  StartDwellSec: 1.0
  EndRadiusPx: 18
  StopDwellSec: 1.0
  hysteresis_px: 6

mediapipe:
  model_complexity: 1
  detection_confidence: 0.9
  tracking_confidence: 0.9
  ema_alpha: 1.0    # 1.0 disables smoothing (lowest lag)

color:
  # HSV color tracking settings (for HSV mode)
  hsv_low:  [57, 155, 29]
  hsv_high: [137, 255, 139]
  morph_kernel: 3
  min_area: 60
  use_depth_filter: true    # Filter out colors outside depth range
  # Optical flow fallback
  use_flow_fallback: false
  flow_win: 15
  flow_max_level: 2

led:
  # LED tracking settings (combined red HSV + brightness)
  # Filters out white ceiling lights by requiring BOTH red AND bright
  hsv_low: [0, 100, 150]     # H: red hue, S: high saturation, V: bright
  hsv_high: [20, 255, 255]   # Narrow hue range for pure red (0-20 degrees)
  brightness_threshold: 20  # Minimum brightness (0-255) - strict
  morph_kernel: 3
  min_area: 20               # Minimum blob area to filter noise

experiment:
  methods_order: ["hsv", "hsv"]  # "hsv" now uses LED tracking (red + brightness)
  trials_per_method: 1          # ignored; runner forces 1
  save_preview: false           # set true to write preview.mp4
  output_dir: "runs"
  metronome_bpm: 0
  max_jump_px: 60            # jump gate threshold in pixels

tremor_analysis:
  band_low_hz: 4.0           # lower bound of tremor frequency band
  band_high_hz: 10.0         # upper bound of tremor frequency band

stereo_3d:
  target_depth_m: 0.5        # Spiral perceived depth in meters for XReal glasses
  disparity_offset_px: -600     # Manual disparity adjustment (+ closer, - farther)
  flip_x: true               # Flip horizontal axis (for head-mounted camera)
  flip_y: false              # Flip vertical axis
  finger_scale_x: 1.0        # No scaling needed with 1920x1080 camera
  finger_scale_y: 1.0        # Direct 1:1 pixel mapping

show_live_preview: true
